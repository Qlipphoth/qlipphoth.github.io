<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>Qliphoth's Blog</title><meta name="author" content="Qliphoth"><meta name="copyright" content="Qliphoth"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="ffffff"><meta name="description" content="See You Next Game">
<meta property="og:type" content="website">
<meta property="og:title" content="Qliphoth&#39;s Blog">
<meta property="og:url" content="https://qlipphoth.github.io/page/5/index.html">
<meta property="og:site_name" content="Qliphoth&#39;s Blog">
<meta property="og:description" content="See You Next Game">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://s2.loli.net/2023/08/12/NkcT1PLmZVj5iY3.png">
<meta property="article:author" content="Qliphoth">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://s2.loli.net/2023/08/12/NkcT1PLmZVj5iY3.png"><link rel="shortcut icon" href="https://s2.loli.net/2023/08/12/NkcT1PLmZVj5iY3.png"><link rel="canonical" href="https://qlipphoth.github.io/page/5/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: 'days',
  dateSuffix: {
    just: 'Just',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: {"limitCount":500,"languages":{"author":"Author: Qliphoth","link":"Link: ","source":"Source: Qliphoth's Blog","info":"Copyright is owned by the author. For commercial reprints, please contact the author for authorization. For non-commercial reprints, please indicate the source."}},
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Qliphoth\'s Blog',
  isPost: false,
  isHome: true,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '2025-01-14 10:21:43'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', 'ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          const now = new Date()
          const hour = now.getHours()
          const isNight = hour <= 10 || hour >= 18
          if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
          else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="/css/custom/beauty.css" media="defer" onload="this.media='all'"><!-- hexo injector head_end start --><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Zfour/hexo-electric-clock@1.0.6/clock.css"><link rel="stylesheet" href="/css/runtime.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://unpkg.zhimg.com/hexo-butterfly-swiper/lib/swiper.min.css" media="print" onload="this.media='all'"><!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.3.0"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://s2.loli.net/2023/08/12/NkcT1PLmZVj5iY3.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">131</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">23</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">22</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/talk/"><i class="fa-fw fas fa-comment-dots"></i><span> Talk</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw far fa-heart"></i><span> About</span></a></div></div></div></div><div class="page" id="body-wrap"><header class="full_page" id="page-header" style="background-image: url('https://s2.loli.net/2023/08/14/GmrqfMSTWaYE7t1.png')"><nav id="nav"><span id="blog-info"><a href="/" title="Qliphoth's Blog"><span class="site-name">Qliphoth's Blog</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/talk/"><i class="fa-fw fas fa-comment-dots"></i><span> Talk</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw far fa-heart"></i><span> About</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="site-info"><h1 id="site-title">Qliphoth's Blog</h1><div id="site-subtitle"><span id="subtitle"></span></div><div id="site_social_icons"><a class="social-icon" href="https://github.com/qlipphoth" target="_blank" title="Github"><i class="fab fa-github" style="color: #24292e;"></i></a><a class="social-icon" href="https://space.bilibili.com/33030427" target="_blank" title="Bilibili"><i class="fab fa-bilibili" style="color: #FB7299;"></i></a><a class="social-icon" href="mailto:1841362281@qq.com" target="_blank" title="Email"><i class="fas fa-envelope" style="color: #4a7dbe;"></i></a></div></div><div id="scroll-down"><i class="fas fa-angle-down scroll-down-effects"></i></div></header><main class="layout" id="content-inner"><div class="recent-posts" id="recent-posts"><div class="recent-post-item"><div class="post_cover left"><a href="/2023/12/12/2023-12-12-2/" title="UE 入坑系列（六）：多线程"><img class="post-bg" src="https://s2.loli.net/2023/08/28/4K7FV6pqUwYjn2X.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="UE 入坑系列（六）：多线程"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/12/12/2023-12-12-2/" title="UE 入坑系列（六）：多线程">UE 入坑系列（六）：多线程</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time class="post-meta-date-created" datetime="2023-12-12T22:00:31.000Z" title="Created 2023-12-12 22:00:31">2023-12-12</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2025-01-14T10:20:41.000Z" title="Updated 2025-01-14 10:20:41">2025-01-14</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/UE/">UE</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/UE/">UE</a></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-comments"></i><a class="twikoo-count" href="/2023/12/12/2023-12-12-2/#post-comment"><i class="fa-solid fa-spinner fa-spin"></i></a><span class="article-meta-label"> comments</span></span></div><div class="content">
参考：

https://blog.csdn.net/j756915370/article/details/122752719
https://zhuanlan.zhihu.com/p/38881269
https://zhuanlan.zhihu.com/p/396824188


预备知识
进程 &amp; 线程 &amp; 异步

线程是调度的基本单位，而进程则是资源拥有的基本单位。多线程是实现异步的一种方式



进程
在多道程序同时运行的背景下，进程之间需要共享系统资源，因此会导致各程序在执行过程中出现相互制约的关系，程序的执行会表现出间断性的特征。这些特征都是在程序的执行过程中发生的，是动态的过程，而传统的程序本身是一组指令的集合，是一个静态的概念，无法描述程序在内存中的执行情况，即我们无法从程序的字面上看出它何时执行、何时停顿，也无法看出它与其他执行程序的关系，因此，程序这个静态概念已不能如实反映程序并发执行过程的特征。为了深刻描述程序动态执行过程的性质乃至更好地支持和管理多道程序的并发执行，人们引入了进程的概念。
进程就是 process，它是一个程序的运行实例。当我 ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2023/12/12/2023-12-12-1/" title="UE 入坑系列（五）：Actor 的生命周期"><img class="post-bg" src="https://s2.loli.net/2023/08/28/4K7FV6pqUwYjn2X.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="UE 入坑系列（五）：Actor 的生命周期"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/12/12/2023-12-12-1/" title="UE 入坑系列（五）：Actor 的生命周期">UE 入坑系列（五）：Actor 的生命周期</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time class="post-meta-date-created" datetime="2023-12-12T16:38:04.000Z" title="Created 2023-12-12 16:38:04">2023-12-12</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2025-01-14T10:20:41.000Z" title="Updated 2025-01-14 10:20:41">2025-01-14</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/UE/">UE</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/UE/">UE</a></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-comments"></i><a class="twikoo-count" href="/2023/12/12/2023-12-12-1/#post-comment"><i class="fa-solid fa-spinner fa-spin"></i></a><span class="article-meta-label"> comments</span></span></div><div class="content">前言
本文整理自 UE 官方文档：Actor 生命周期。
UE 中的 Actor 主要有三种加载方式：Load from Disk、Play in Editor、SpawnActor；无论 Actor 的创建方式如何，它们的销毁路径均相同。
生命周期详解
Load from Disk

已位于关卡中的 Actor 使用此路径，如 LoadMap 发生时、或 AddToWorld（从流关卡或子关卡）被调用时。


包/关卡中的 Actor 从磁盘中进行加载。


PostLoad - 在序列化 Actor 从磁盘加载完成后被调用。在此处可执行自定义版本化和修复操作。PostLoad 与 PostActorCreated 互斥。


InitializeActorsForPlay


为未初始化的 Actor 执行 RouteActorInitialize（包含无缝行程携带）


PreInitializeComponents - 在 Actor 的组件上调用 InitializeComponent 之前进行调用。


InitializeComponent - Actor 上定义的每个组 ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2023/12/10/2023-12-10-1/" title="图形学补完计划（四）：光照模型-2"><img class="post-bg" src="https://s2.loli.net/2023/12/11/16sU4Xkpd9TvhEA.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="图形学补完计划（四）：光照模型-2"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/12/10/2023-12-10-1/" title="图形学补完计划（四）：光照模型-2">图形学补完计划（四）：光照模型-2</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time class="post-meta-date-created" datetime="2023-12-10T22:43:29.000Z" title="Created 2023-12-10 22:43:29">2023-12-10</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2025-01-14T10:20:41.000Z" title="Updated 2025-01-14 10:20:41">2025-01-14</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/NERV/">NERV</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/NERV/%E5%9B%BE%E5%BD%A2%E5%AD%A6/">图形学</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/%E5%9B%BE%E5%BD%A2%E5%AD%A6/">图形学</a></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-comments"></i><a class="twikoo-count" href="/2023/12/10/2023-12-10-1/#post-comment"><i class="fa-solid fa-spinner fa-spin"></i></a><span class="article-meta-label"> comments</span></span></div><div class="content">
参考

https://sites.cs.ucsb.edu/~lingqi/teaching/games101.html
https://zhuanlan.zhihu.com/p/370903314


全局光照模型
上一节主要分析了以 Phong 模型为主的局部光照模型，这些光照模型都是经验性的，不真实的；本节要介绍的全局光照模型就恰好相反。
全局光照模型是基于光学物理原理的，光照强度的计算依赖于光能在现实世界中的传播情况，考虑光线与整个场景中各物体表面及物体表面间的相互影响，是绘制真实感图形的理论依据；具体而言，包括 路径跟踪（path tracing）、双向路径跟踪（bidirectional path tracing）、辐射度方法（radiosity method）等。
与局部光照模型相比，全局光照模型需要相当大的计算量 ，但同时也能取得非常逼真的真实效果。由于计算机硬件的限制，全局光照模型一般在离线渲染领域如电影中应用，随着GPU硬件的发展和算法的改进 ，采用全局照模型的实时渲染逐渐成为研究的热点。
Ray Tracing (Whitted-Style)
光线跟踪算法通过模 ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2023/12/09/2023-12-9-1/" title="C++ 补完计划（三）：泛型与多态"><img class="post-bg" src="https://s2.loli.net/2023/08/12/a6FceKmItYSsW7b.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="C++ 补完计划（三）：泛型与多态"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/12/09/2023-12-9-1/" title="C++ 补完计划（三）：泛型与多态">C++ 补完计划（三）：泛型与多态</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time class="post-meta-date-created" datetime="2023-12-09T21:19:08.000Z" title="Created 2023-12-09 21:19:08">2023-12-09</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2025-01-14T10:20:41.000Z" title="Updated 2025-01-14 10:20:41">2025-01-14</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Cpp/">Cpp</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/Cpp/NERV/">NERV</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Cpp/">Cpp</a></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-comments"></i><a class="twikoo-count" href="/2023/12/09/2023-12-9-1/#post-comment"><i class="fa-solid fa-spinner fa-spin"></i></a><span class="article-meta-label"> comments</span></span></div><div class="content">前言
本文将会是一个大杂烩，打算将 C++ 学习以来关于泛型以及多态的各种内容全部塞在这里。可能会没有什么条理性，但反正也没人看我的博客，那干脆就随心所欲一点咯。
今天的 C++ 已经是个多重泛型编程语言(multiparadigm programming lauguage)，一个同时支持过程形式(procedural)、面向对象形式(object-oriented)、函数形式(functional)、范型形式(generic)、元编程形式(metaprogramming)的语言。
这些能力和弹性使C++成为一个无可匹敌的工具，但也可能引发使用者的某些迷惑，比如多态。在这几种编程泛型中，面向对象编程、范型编程以及很新的元编程形式都支持多态的概念，但又有所不同。 C++支持多种形式的多态，从表现的形式来看，有虚函数、模板、重载等，从绑定时间来看，可以分成静态多态和动态多态，也称为编译期多态和运行期多态。

编译时多态也称为为静态联编，通过重载和模板来实现，运行时多态称为动态联编，通过继承和虚函数来实现。

本文即讲述这其中的异同。注意泛型编程和元编程通常都是以模板形式实现的，因此在本文中 ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2023/12/08/2023-12-8-2/" title="图形学补完计划（四）：光照模型-1"><img class="post-bg" src="https://s2.loli.net/2023/12/08/zJmF2S7y6UplW4r.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="图形学补完计划（四）：光照模型-1"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/12/08/2023-12-8-2/" title="图形学补完计划（四）：光照模型-1">图形学补完计划（四）：光照模型-1</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time class="post-meta-date-created" datetime="2023-12-08T20:01:22.000Z" title="Created 2023-12-08 20:01:22">2023-12-08</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2025-01-14T10:20:41.000Z" title="Updated 2025-01-14 10:20:41">2025-01-14</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/NERV/">NERV</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/NERV/%E5%9B%BE%E5%BD%A2%E5%AD%A6/">图形学</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/%E5%9B%BE%E5%BD%A2%E5%AD%A6/">图形学</a></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-comments"></i><a class="twikoo-count" href="/2023/12/08/2023-12-8-2/#post-comment"><i class="fa-solid fa-spinner fa-spin"></i></a><span class="article-meta-label"> comments</span></span></div><div class="content">
参考：

https://sites.cs.ucsb.edu/~lingqi/teaching/games101.html
https://zhuanlan.zhihu.com/p/49474631


光照模型
当光照射到物体表面时,物体对光会发生反射、透射、吸收、衍射、折射、和干涉,其中被物体吸收的部分转化为热,反射、透射的光进入人的视觉系统,使我们能看见物体。为模拟这一现象,我们建立一些数学模型来替代复杂的物理模型，这些模型就称为明暗效应模型或者光照模型。
光照模型可分为局部光照模型与全局光照模型，下面将按种类进行分析。
局部光照模型
在图形学中,仅处理光源直接照射物体表面的光照明模型被称为局部光照明模型。
局部光照模型是一种比较简单的光照模型，它是与光栅化渲染算法相适应的，光栅化算法一次只考虑一个像素的光照强度，因此局部光照模型不能计算某像素受其他像素影响的光照强度部分。也就是说，局部光照模型只对物体进行直接光照的计算，而不考虑其他的间接影响，常见的局部光照模型有以下几种。
Lambert光照模型
Lambert光照模型主要是用来模拟粗糙物体表面的漫反射光照现象，是一种经验模 ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2023/12/08/2023-12-8-1/" title="图形学补完计划（三）：Antialiasing"><img class="post-bg" src="https://s2.loli.net/2023/12/08/CZwgpQi641rs7Pf.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="图形学补完计划（三）：Antialiasing"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/12/08/2023-12-8-1/" title="图形学补完计划（三）：Antialiasing">图形学补完计划（三）：Antialiasing</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time class="post-meta-date-created" datetime="2023-12-08T16:07:14.000Z" title="Created 2023-12-08 16:07:14">2023-12-08</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2025-01-14T10:20:41.000Z" title="Updated 2025-01-14 10:20:41">2025-01-14</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/NERV/">NERV</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/NERV/%E5%9B%BE%E5%BD%A2%E5%AD%A6/">图形学</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/%E5%9B%BE%E5%BD%A2%E5%AD%A6/">图形学</a></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-comments"></i><a class="twikoo-count" href="/2023/12/08/2023-12-8-1/#post-comment"><i class="fa-solid fa-spinner fa-spin"></i></a><span class="article-meta-label"> comments</span></span></div><div class="content">
参考：

https://sites.cs.ucsb.edu/~lingqi/teaching/games101.html
https://blog.csdn.net/qq_51776686/article/details/122462161
https://www.zhihu.com/question/20236638/answer/44821615
https://zhuanlan.zhihu.com/p/431384101
https://zhuanlan.zhihu.com/p/366494818


光栅化所带来的问题
光栅化是将图形转换成像素图像的过程，由于三维空间中的物体都是连续的，而屏幕上的像素则是一个离散的二维数组，判断一个点到底没有被某个像素覆盖的时候单纯是一个“有”或者“没有&quot;问题，丢失了连续性的信息，因此会带来很多问题。

学过 dsp 的同学都知道，离散就意味着采样率有限，因此一定存在一个最大的采样率；当要采样的信号频率大于这个值时，就会出现各种问题。

常见的问题有：锯齿、摩尔纹、车轮效应等。


转动过快的车轮会让人觉得在往反方向旋转

本节主 ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2023/12/07/2023-12-7-1/" title="图形学补完计划（二）：Rendering Pipeline"><img class="post-bg" src="https://s2.loli.net/2023/12/07/EMI7hzVflNRW5Xj.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="图形学补完计划（二）：Rendering Pipeline"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/12/07/2023-12-7-1/" title="图形学补完计划（二）：Rendering Pipeline">图形学补完计划（二）：Rendering Pipeline</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time class="post-meta-date-created" datetime="2023-12-07T13:08:55.000Z" title="Created 2023-12-07 13:08:55">2023-12-07</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2025-01-14T10:20:41.000Z" title="Updated 2025-01-14 10:20:41">2025-01-14</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/NERV/">NERV</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/NERV/%E5%9B%BE%E5%BD%A2%E5%AD%A6/">图形学</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/%E5%9B%BE%E5%BD%A2%E5%AD%A6/">图形学</a></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-comments"></i><a class="twikoo-count" href="/2023/12/07/2023-12-7-1/#post-comment"><i class="fa-solid fa-spinner fa-spin"></i></a><span class="article-meta-label"> comments</span></span></div><div class="content">
参考:

细说图形学渲染管线
https://zhuanlan.zhihu.com/p/223033896


图形渲染管线
图形渲染管线是实时渲染的核心组件。图形渲染管线实际上指的是一堆原始图形数据途经一个输送管道，期间经过各种变化处理最终出现在屏幕的过程。渲染管线是实时渲染的重要工具，实时渲染离不开渲染管线。
图形渲染管线主要包括两个功能：一是将物体3D坐标转变为屏幕空间2D坐标，二是为屏幕每个像素点进行着色。渲染管线的一般流程如下图所示。分别是：顶点数据的输入、顶点着色器、曲面细分过程、几何着色器、图元组装、裁剪剔除、光栅化、片段着色器以及混合测试。

渲染管线的一个特点就是每个阶段都会把前一个阶段的输出作为该阶段的输入。例如，片段着色器会将光栅化后的片段(以及片段的数据块)作为输入进行光照计算。除了图元组装和光栅化几个阶段是由硬件自动完成之外，管线的其他阶段管线都是可编程/可配置的。其中顶点着色器、曲面细分相关着色器、几何着色器和片段着色器是可编程的阶段，而混合测试是可高度配置的阶段。管线的可编程/可配置是渲染管理的另一个特点。因为早期的渲染管线采用的是立即渲染模式(Imme ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2023/12/06/2023-12-6-1/" title="图形学补完计划（一）：MVP矩阵"><img class="post-bg" src="https://s2.loli.net/2023/12/06/JlZLrtjTXB3WY1o.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="图形学补完计划（一）：MVP矩阵"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/12/06/2023-12-6-1/" title="图形学补完计划（一）：MVP矩阵">图形学补完计划（一）：MVP矩阵</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time class="post-meta-date-created" datetime="2023-12-06T13:34:42.000Z" title="Created 2023-12-06 13:34:42">2023-12-06</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2025-01-14T10:20:41.000Z" title="Updated 2025-01-14 10:20:41">2025-01-14</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/NERV/">NERV</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/NERV/%E5%9B%BE%E5%BD%A2%E5%AD%A6/">图形学</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/%E5%9B%BE%E5%BD%A2%E5%AD%A6/">图形学</a></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-comments"></i><a class="twikoo-count" href="/2023/12/06/2023-12-6-1/#post-comment"><i class="fa-solid fa-spinner fa-spin"></i></a><span class="article-meta-label"> comments</span></span></div><div class="content">
参考:

https://sites.cs.ucsb.edu/~lingqi/teaching/games101.html
http://www.songho.ca/math/homogeneous/homogeneous.html
https://zhuanlan.zhihu.com/p/261097735
https://zhuanlan.zhihu.com/p/261097735
https://zhuanlan.zhihu.com/p/65969162
https://zhuanlan.zhihu.com/p/223033896


齐次坐标
齐次坐标的引入

问题：两条平行线可以相交于一点

在欧氏几何空间，同一平面的两条平行线不能相交，这是我们都熟悉的一种场景。然而，在透视空间里面，两条平行线可以相交，例如：火车轨道随着我们的视线越来越窄，最后两条平行线在无穷远处交于一点。
欧氏空间（或者笛卡尔空间）描述2D/3D几何非常适合，但是这种方法却不适合处理透视空间的问题（实际上，欧氏几何是透视几何的一个子集合），2维笛卡尔坐标可以表示为（x,y）。
如果一个点在无穷远处，这个 ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2023/12/04/2023-12-4-1/" title="C++ 补完计划（二）：类的大小"><img class="post-bg" src="https://s2.loli.net/2023/08/12/a6FceKmItYSsW7b.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="C++ 补完计划（二）：类的大小"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/12/04/2023-12-4-1/" title="C++ 补完计划（二）：类的大小">C++ 补完计划（二）：类的大小</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time class="post-meta-date-created" datetime="2023-12-04T23:19:45.000Z" title="Created 2023-12-04 23:19:45">2023-12-04</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2025-01-14T10:20:41.000Z" title="Updated 2025-01-14 10:20:41">2025-01-14</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Cpp/">Cpp</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/Cpp/NERV/">NERV</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Cpp/">Cpp</a></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-comments"></i><a class="twikoo-count" href="/2023/12/04/2023-12-4-1/#post-comment"><i class="fa-solid fa-spinner fa-spin"></i></a><span class="article-meta-label"> comments</span></span></div><div class="content">
本文转载自 C++类大小详尽讲解

C++ 类的大小
与类大小有关的因素：普通成员变量，虚函数，继承（单一继承，多重继承，重复继承，虚拟继承）; 与类大小无关的因素：静态成员变量，静态成员函数及普通成员函数。
内存对齐
由于在分析类的大小时会经常涉及到内存对齐的概念，因此这里先总结一下相关的知识点。


内存对齐的原因： 关键在于CPU存取数据的效率问题。为了提高效率，计算机从内存中取数据是按照一个固定长度的。比如在32位机上，CPU每次都是取32bit数据的，也就是4字节；若不进行对齐，要取出两块地址中的数据，进行掩码和移位等操作，写入目标寄存器内存，效率很低。内存对齐一方面可以节省内存，一方面可以提升数据读取的速度；


内容： 内存对齐指的是C++结构体中的数据成员，其内存地址是否为其对齐字节大小的倍数。


对齐原则：

结构体变量的首地址能够被其最宽基本类型成员的对齐值所整除；
结构体内每一个成员的相对于起始地址的偏移量能够被该变量的大小整除；
结构体总体大小能够被最宽成员大小整除；如果不满足这些条件，编译器就会进行一个填充(padding)。



#pragma pac ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2023/11/13/2023-11-13-1/" title="GASDocumentation 案例项目分析（四）"><img class="post-bg" src="https://s2.loli.net/2023/11/14/5P1WOjDbn8GrQIS.gif" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="GASDocumentation 案例项目分析（四）"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/11/13/2023-11-13-1/" title="GASDocumentation 案例项目分析（四）">GASDocumentation 案例项目分析（四）</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time class="post-meta-date-created" datetime="2023-11-13T21:51:33.000Z" title="Created 2023-11-13 21:51:33">2023-11-13</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2025-01-14T10:20:41.000Z" title="Updated 2025-01-14 10:20:41">2025-01-14</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/UE/">UE</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/UE/GAS/">GAS</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/UE/">UE</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/GAS/">GAS</a></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-comments"></i><a class="twikoo-count" href="/2023/11/13/2023-11-13-1/#post-comment"><i class="fa-solid fa-spinner fa-spin"></i></a><span class="article-meta-label"> comments</span></span></div><div class="content">前言
上一节我们分析了 FireGun 技能的整个流程，想必大家已经对 GAS 的使用有了一个初步的了解了，也大致知道了 GA、GE、GC 这些概念以及如何相互调用。本节就来继续分析另一个技能，Meteor。
Meteor
这个技能也是由纯蓝图创建的，技能整体流程包括目标确认、技能消耗、技能冷却、技能本体（陨石）、击中伤害与眩晕、击中效果（倒地）等组成，相比于 FireGun 要更为复杂。让我们逐一分析。
GA_Meteor_BP
这个蓝图就是 Meteor 技能的 GA 了，同样继承自 GDGameplayAbility。来分析蓝图中实现了哪些功能。
作为一个 GA，最重要的肯定还是重写 ActivateAbility。

首先还是从 ActorInfo 中获取了释放者的信息并且存在了 OwningHero 变量中。

其次是关于一些辅助信息显示的设置以及移动相机，在释放这种需要瞄准的技能时，移动相机是一个不错的做法，可以使视野开阔一些。

随后就是较为重要的瞄准部分了，这里先获取了 OwnerActor 即释放者的位置，再向前移动 200 个单位作为瞄准的初始位置。随后也启动了一个 ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2023/11/12/2023-11-12-1/" title="GASDocumentation 案例项目分析（三）"><img class="post-bg" src="https://s2.loli.net/2023/11/11/gjWYPFRMALU6H8r.gif" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="GASDocumentation 案例项目分析（三）"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/11/12/2023-11-12-1/" title="GASDocumentation 案例项目分析（三）">GASDocumentation 案例项目分析（三）</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time class="post-meta-date-created" datetime="2023-11-12T14:08:00.000Z" title="Created 2023-11-12 14:08:00">2023-11-12</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2025-01-14T10:20:41.000Z" title="Updated 2025-01-14 10:20:41">2025-01-14</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/UE/">UE</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/UE/GAS/">GAS</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/UE/">UE</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/GAS/">GAS</a></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-comments"></i><a class="twikoo-count" href="/2023/11/12/2023-11-12-1/#post-comment"><i class="fa-solid fa-spinner fa-spin"></i></a><span class="article-meta-label"> comments</span></span></div><div class="content">前言
上回说到，FireGun 这个类有一个名为 DamageGameplayEffect 的 GE 用于伤害计算以及击中特效播放，并且最终通过 Projectile-&gt;DamageEffectSpecHandle 的形式将该 GE 传递给了 Projectile。不难想象最终一定会由子弹本身的碰撞等事件来执行该 GE 以计算伤害（DamageExecCalc）及播放 GC。
12UPROPERTY(BlueprintReadOnly, EditAnywhere)TSubclassOf&lt;UGameplayEffect&gt; DamageGameplayEffect;
上一节主要分析了前者，即 GDDamageExecCalculation  的实现，本节就从 GameplayCue（GC）开始分析。
GameplayCue
首先来看一下文档中关于 GC 的解释：
GASDocumentation_Chinese:GameplayCue
GameplayCue(GC) 执行非游戏逻辑相关的功能, 像音效, 粒子效果, 镜头抖动等等。 GameplayCue 一般是可同步(除 ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2023/11/11/2023-11-11-1/" title="GASDocumentation 案例项目分析（二）"><img class="post-bg" src="https://s2.loli.net/2023/11/12/YE1PLFJBUQekhf8.gif" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="GASDocumentation 案例项目分析（二）"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/11/11/2023-11-11-1/" title="GASDocumentation 案例项目分析（二）">GASDocumentation 案例项目分析（二）</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time class="post-meta-date-created" datetime="2023-11-11T15:55:27.000Z" title="Created 2023-11-11 15:55:27">2023-11-11</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2025-01-14T10:20:41.000Z" title="Updated 2025-01-14 10:20:41">2025-01-14</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/UE/">UE</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/UE/GAS/">GAS</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/UE/">UE</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/GAS/">GAS</a></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-comments"></i><a class="twikoo-count" href="/2023/11/11/2023-11-11-1/#post-comment"><i class="fa-solid fa-spinner fa-spin"></i></a><span class="article-meta-label"> comments</span></span></div><div class="content">前言
上一节我们分析了 GASDocumentation 中与 GAS 相关的一些类的设计，本节就开始分析具体技能的实现。
技能的实现
查看 BP_HeroCharacter 蓝图，会发现在 Abilities.CharacterAbilities 下挂载了 7 个技能，上一节也分析过，CharacterAbilities 会在开局就全部赋予玩家，让我们一一分析。

Jump
项目中，为了演示非实例化的技能是如何使用的，把 Jump 也作为一个技能配置了，这个技能是 C++ 实现的。查看相应的类：
123456789101112131415161718192021222324252627282930313233343536/** * Makes the Character try to jump using the standard Character-&gt;Jump.  * This is an example of a non-instanced ability. */UCLASS()class GASDOCUMENTATION_API UGDGA_CharacterJump : ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2023/11/10/2023-11-10-1/" title="GASDocumentation 案例项目分析（一）"><img class="post-bg" src="https://s2.loli.net/2023/11/10/zXw1uyBSA4fYKeL.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="GASDocumentation 案例项目分析（一）"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/11/10/2023-11-10-1/" title="GASDocumentation 案例项目分析（一）">GASDocumentation 案例项目分析（一）</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time class="post-meta-date-created" datetime="2023-11-10T22:43:39.000Z" title="Created 2023-11-10 22:43:39">2023-11-10</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2025-01-14T10:20:41.000Z" title="Updated 2025-01-14 10:20:41">2025-01-14</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/UE/">UE</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/UE/GAS/">GAS</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/UE/">UE</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/GAS/">GAS</a></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-comments"></i><a class="twikoo-count" href="/2023/11/10/2023-11-10-1/#post-comment"><i class="fa-solid fa-spinner fa-spin"></i></a><span class="article-meta-label"> comments</span></span></div><div class="content">前言
终于准备开新坑啦！终于使用了一次正常封面 在 STL 系列基本写完之后就摸了挺久的，其实这段时间也没有闲着，把 MP-TPS 的那个教程基本看完了，现在只剩第一部分的联机插件没有实现，准备最近开始继续更新 MP-TPS 系列，把这个项目的内容好好总结一下。
说回正题，目前的准备是将 GAS 结合到这个项目中，因此有必要好好学习一下 GAS 系统。但是总所周知，GAS 系统虽功能强大，学习曲线却异常陡峭，本来打算通过看 ActionRPG 项目的方式来学习 GAS，奈何这个项目本身也十分复杂。最后，在机缘巧合之下终于找到了这个项目———— GASDocumentation 以及某位好心人翻译的中文版 GASdocumentation_Chinese，感谢这些开源贡献者。
GASDocumentation 这个项目提供了十分完善的 GAS 文档，包含了 GAS 系统的各个模块的详细介绍，虽说没有细到分析源码的地步，但作为入门阶段的百科全书已经十分优秀了。除此之外，该项目还自带了一个同名的 UE4 工程，简单展示了 GAS 的使用方法，可以说是无比良心了。
相比于 ActionRPG， ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2023/10/30/2023-10-30-1/" title="从零开始的 STL 实现记录：Adapter-2"><img class="post-bg" src="https://s2.loli.net/2023/08/18/cDqb7yXhnK6rkpN.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="从零开始的 STL 实现记录：Adapter-2"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/10/30/2023-10-30-1/" title="从零开始的 STL 实现记录：Adapter-2">从零开始的 STL 实现记录：Adapter-2</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time class="post-meta-date-created" datetime="2023-10-30T12:27:28.000Z" title="Created 2023-10-30 12:27:28">2023-10-30</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2025-01-14T10:20:41.000Z" title="Updated 2025-01-14 10:20:41">2025-01-14</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Cpp/">Cpp</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/Cpp/STL/">STL</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Cpp/">Cpp</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/STL/">STL</a></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-comments"></i><a class="twikoo-count" href="/2023/10/30/2023-10-30-1/#post-comment"><i class="fa-solid fa-spinner fa-spin"></i></a><span class="article-meta-label"> comments</span></span></div><div class="content">前言
上一节介绍了 iterator adapter 的内容，本节将介绍 adapter 家族的最后一部分成员：functor adapter。
functor adapter 是所有配接器中数量最庞大的一类，配接灵活程度非常高，通过它们之间的绑定、组合与修饰，几乎可以创造出各种表达式。
如同 container adapters 内藏了一个 container member 一样、或是像 reverse iterator （adapters）内藏了一个 iterator mermber 一样、或是像 stream iterator（adapters）内藏了一个 pointer to stream 一样，或是像 insert iterator （adapters）内藏了一个 pointer to container （并因而得以取其 iterator）一样，每一个 function adapters 也内藏了一个member object，其型别等同于它所要配接的对象（那个对象当然是一个“可配接的仿函数”，adaptable functor）。当 function adapter 有了 ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2023/10/29/2023-10-29-1/" title="从零开始的 STL 实现记录：Adapter-1"><img class="post-bg" src="https://s2.loli.net/2023/08/18/cDqb7yXhnK6rkpN.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="从零开始的 STL 实现记录：Adapter-1"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/10/29/2023-10-29-1/" title="从零开始的 STL 实现记录：Adapter-1">从零开始的 STL 实现记录：Adapter-1</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time class="post-meta-date-created" datetime="2023-10-29T20:11:32.000Z" title="Created 2023-10-29 20:11:32">2023-10-29</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2025-01-14T10:20:41.000Z" title="Updated 2025-01-14 10:20:41">2025-01-14</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Cpp/">Cpp</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/Cpp/STL/">STL</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Cpp/">Cpp</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/STL/">STL</a></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-comments"></i><a class="twikoo-count" href="/2023/10/29/2023-10-29-1/#post-comment"><i class="fa-solid fa-spinner fa-spin"></i></a><span class="article-meta-label"> comments</span></span></div><div class="content">前言
配接器（adapters）在 STL 组件的灵活组合运用功能上，扮演着轴承、转换器的角色。Adapter 这个概念，事实上是一种设计模式。 《Design Patterns》一书中对 adapter 样式的定义如下：将一个类的接口转换为另一个类的接口，使原本因接口不兼容而不能合作的类，可以一起运作。
STL 中所提供的配接器，按照配接的对象可以分为三类：

改变 Container 接口的配接器：Containers Adapter
改变 Iterator  接口的配接器：Iterators  Adapter
改变 Functor   接口的配接器：Functors   Adapter

其中，container Adapter 已经在前面介绍 stack &amp; queue 中介绍过，这两个容器都是通过修饰 deque 接口的方式呈现出另一种容器的样子，这里就不再介绍了。本节将重点介绍 Iterator Adapter 的内容。
Iterator Adapter
STL 提供了许多应用于迭代器身上的配接器，包括 insert iterators、reverse iterat ...</div></div></div><nav id="pagination"><div class="pagination"><a class="extend prev" rel="prev" href="/page/4/#content-inner"><i class="fas fa-chevron-left fa-fw"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/#content-inner">4</a><span class="page-number current">5</span><a class="page-number" href="/page/6/#content-inner">6</a><span class="space">&hellip;</span><a class="page-number" href="/page/9/#content-inner">9</a><a class="extend next" rel="next" href="/page/6/#content-inner"><i class="fas fa-chevron-right fa-fw"></i></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://s2.loli.net/2023/08/12/NkcT1PLmZVj5iY3.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Qliphoth</div><div class="author-info__description">See You Next Game</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">131</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">23</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">22</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/qlipphoth"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/qlipphoth" target="_blank" title="Github"><i class="fab fa-github" style="color: #24292e;"></i></a><a class="social-icon" href="https://space.bilibili.com/33030427" target="_blank" title="Bilibili"><i class="fab fa-bilibili" style="color: #FB7299;"></i></a><a class="social-icon" href="mailto:1841362281@qq.com" target="_blank" title="Email"><i class="fas fa-envelope" style="color: #4a7dbe;"></i></a></div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Post</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2024/12/10/2024-12-10-1/" title="TortoiseSVN 简单入门"><img src="https://s2.loli.net/2023/08/14/mkTFOD8fJbu4VH3.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="TortoiseSVN 简单入门"/></a><div class="content"><a class="title" href="/2024/12/10/2024-12-10-1/" title="TortoiseSVN 简单入门">TortoiseSVN 简单入门</a><time datetime="2024-12-10T17:21:06.000Z" title="Created 2024-12-10 17:21:06">2024-12-10</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/11/23/2024-11-23-1/" title="Lua 源码解析（二）：基本数据类型 —— 表（下）"><img src="https://s2.loli.net/2024/11/08/NRtroieCAd98Uzp.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Lua 源码解析（二）：基本数据类型 —— 表（下）"/></a><div class="content"><a class="title" href="/2024/11/23/2024-11-23-1/" title="Lua 源码解析（二）：基本数据类型 —— 表（下）">Lua 源码解析（二）：基本数据类型 —— 表（下）</a><time datetime="2024-11-23T16:58:19.000Z" title="Created 2024-11-23 16:58:19">2024-11-23</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/11/17/2024-11-17-1/" title="Lua 源码解析（二）：基本数据类型 —— 表（上）"><img src="https://s2.loli.net/2024/11/08/NRtroieCAd98Uzp.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Lua 源码解析（二）：基本数据类型 —— 表（上）"/></a><div class="content"><a class="title" href="/2024/11/17/2024-11-17-1/" title="Lua 源码解析（二）：基本数据类型 —— 表（上）">Lua 源码解析（二）：基本数据类型 —— 表（上）</a><time datetime="2024-11-17T16:36:15.000Z" title="Created 2024-11-17 16:36:15">2024-11-17</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/11/15/2024-11-15-1/" title="Lua 源码解析（二）：基本数据类型 —— 字符串"><img src="https://s2.loli.net/2024/11/08/NRtroieCAd98Uzp.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Lua 源码解析（二）：基本数据类型 —— 字符串"/></a><div class="content"><a class="title" href="/2024/11/15/2024-11-15-1/" title="Lua 源码解析（二）：基本数据类型 —— 字符串">Lua 源码解析（二）：基本数据类型 —— 字符串</a><time datetime="2024-11-15T16:09:05.000Z" title="Created 2024-11-15 16:09:05">2024-11-15</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/11/14/2024-11-14-1/" title="Lua 源码解析（二）：基本数据类型 —— Lua 中的数据类型"><img src="https://s2.loli.net/2024/11/08/NRtroieCAd98Uzp.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Lua 源码解析（二）：基本数据类型 —— Lua 中的数据类型"/></a><div class="content"><a class="title" href="/2024/11/14/2024-11-14-1/" title="Lua 源码解析（二）：基本数据类型 —— Lua 中的数据类型">Lua 源码解析（二）：基本数据类型 —— Lua 中的数据类型</a><time datetime="2024-11-14T15:28:37.000Z" title="Created 2024-11-14 15:28:37">2024-11-14</time></div></div></div></div><div class="card-widget" id="card-newest-comments"><div class="item-headline"><i class="fas fa-comment-dots"></i><span>Newest Comments</span></div><div class="aside-list"><span>loading...</span></div></div><div class="card-widget card-categories"><div class="item-headline">
            <i class="fas fa-folder-open"></i>
            <span>Categories</span>
            <a class="card-more-btn" href="/categories/" title="More">
    <i class="fas fa-angle-right"></i></a>
            </div>
            <ul class="card-category-list" id="aside-cat-list">
            <li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Blog/"><span class="card-category-list-name">Blog</span><span class="card-category-list-count">2</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/CSharp/"><span class="card-category-list-name">CSharp</span><span class="card-category-list-count">3</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Cpp/"><span class="card-category-list-name">Cpp</span><span class="card-category-list-count">48</span></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Cpp/NERV/"><span class="card-category-list-name">NERV</span><span class="card-category-list-count">7</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Cpp/STL/"><span class="card-category-list-name">STL</span><span class="card-category-list-count">41</span></a></li></ul></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Lua/"><span class="card-category-list-name">Lua</span><span class="card-category-list-count">5</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/MISC/"><span class="card-category-list-name">MISC</span><span class="card-category-list-count">5</span></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/MISC/DL/"><span class="card-category-list-name">DL</span><span class="card-category-list-count">4</span></a></li></ul></li>
            </ul></div><div class="card-widget card-tags"><div class="item-headline"><i class="fas fa-tags"></i><span>Tags</span></div><div class="card-tag-cloud"><a href="/tags/Cpp/" style="font-size: 1.45em; color: rgb(19, 147, 188)">Cpp</a><a href="/tags/STL/" style="font-size: 1.42em; color: rgb(28, 130, 126)">STL</a><a href="/tags/UE/" style="font-size: 1.39em; color: rgb(106, 59, 54)">UE</a><a href="/tags/LeetCode/" style="font-size: 1.15em; color: rgb(139, 86, 6)">LeetCode</a><a href="/tags/GAS/" style="font-size: 1.24em; color: rgb(112, 13, 77)">GAS</a><a href="/tags/%E5%9B%BE%E5%BD%A2%E5%AD%A6/" style="font-size: 1.3em; color: rgb(92, 11, 61)">图形学</a><a href="/tags/MISC/" style="font-size: 1.24em; color: rgb(163, 184, 89)">MISC</a><a href="/tags/DL/" style="font-size: 1.24em; color: rgb(186, 53, 146)">DL</a><a href="/tags/Blog/" style="font-size: 1.18em; color: rgb(150, 135, 57)">Blog</a><a href="/tags/Hexo/" style="font-size: 1.18em; color: rgb(85, 183, 134)">Hexo</a><a href="/tags/Butterfly/" style="font-size: 1.18em; color: rgb(141, 101, 196)">Butterfly</a><a href="/tags/Github-Page/" style="font-size: 1.15em; color: rgb(142, 12, 20)">Github-Page</a><a href="/tags/Github-Action/" style="font-size: 1.15em; color: rgb(98, 110, 1)">Github-Action</a><a href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" style="font-size: 1.15em; color: rgb(133, 9, 18)">数据结构</a><a href="/tags/%E6%A0%91/" style="font-size: 1.15em; color: rgb(129, 26, 129)">树</a><a href="/tags/Unity/" style="font-size: 1.36em; color: rgb(91, 39, 131)">Unity</a><a href="/tags/C/" style="font-size: 1.33em; color: rgb(166, 31, 8)">C#</a><a href="/tags/Lua/" style="font-size: 1.27em; color: rgb(124, 124, 48)">Lua</a><a href="/tags/UGUI/" style="font-size: 1.18em; color: rgb(116, 130, 165)">UGUI</a><a href="/tags/GameDev/" style="font-size: 1.15em; color: rgb(156, 62, 73)">GameDev</a><a href="/tags/%E6%B8%B8%E6%88%8F%E6%9D%82%E8%B0%88/" style="font-size: 1.15em; color: rgb(87, 49, 47)">游戏杂谈</a><a href="/tags/CSharp/" style="font-size: 1.21em; color: rgb(130, 56, 159)">CSharp</a><a href="/tags/OS/" style="font-size: 1.27em; color: rgb(0, 106, 199)">OS</a></div></div><div class="card-widget card-archives"><div class="item-headline"><i class="fas fa-archive"></i><span>Archives</span><a class="card-more-btn" href="/archives/" title="More">
    <i class="fas fa-angle-right"></i></a></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/12/"><span class="card-archive-list-date">December 2024</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/11/"><span class="card-archive-list-date">November 2024</span><span class="card-archive-list-count">5</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/10/"><span class="card-archive-list-date">October 2024</span><span class="card-archive-list-count">8</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/09/"><span class="card-archive-list-date">September 2024</span><span class="card-archive-list-count">5</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/08/"><span class="card-archive-list-date">August 2024</span><span class="card-archive-list-count">9</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/07/"><span class="card-archive-list-date">July 2024</span><span class="card-archive-list-count">9</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/04/"><span class="card-archive-list-date">April 2024</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/03/"><span class="card-archive-list-date">March 2024</span><span class="card-archive-list-count">9</span></a></li></ul></div><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>Info</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">Article :</div><div class="item-count">131</div></div><div class="webinfo-item"><div class="item-name">Run time :</div><div class="item-count" id="runtimeshow" data-publishDate="2022-08-30T00:00:00.000Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">Total Count :</div><div class="item-count">472k</div></div><div class="webinfo-item"><div class="item-name">UV :</div><div class="item-count" id="busuanzi_value_site_uv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">PV :</div><div class="item-count" id="busuanzi_value_site_pv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">Last Push :</div><div class="item-count" id="last-push-date" data-lastPushDate="2025-01-14T10:21:42.099Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('https://s2.loli.net/2023/08/14/GmrqfMSTWaYE7t1.png')"><div id="footer-wrap"><div class="copyright">&copy;2022 - 2025 By Qliphoth</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="translateLink" type="button" title="Switch Between Traditional Chinese And Simplified Chinese">繁</button><button id="darkmode" type="button" title="Switch Between Light And Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle between single-column and double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="Setting"><i class="fas fa-cog fa-spin"></i></button><button id="go-up" type="button" title="Back To Top"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"><script>(() => { 
  const getCommentUrl = () => {
    const eleGroup = document.querySelectorAll('#recent-posts .article-title')
    let urlArray = []
    eleGroup.forEach(i=>{
      urlArray.push(i.getAttribute('href'))
    })
    return urlArray
  }

  const getCount = () => {
    const runTwikoo = () => {
      twikoo.getCommentsCount({
        envId: 'https://qliphoth.netlify.app/.netlify/functions/twikoo',
        region: '',
        urls: getCommentUrl(),
        includeReply: false
      }).then(function (res) {
        document.querySelectorAll('#recent-posts .twikoo-count').forEach((item,index) => {
          item.textContent = res[index].count
        })
      }).catch(function (err) {
        console.log(err)
      })
    }

      if (typeof twikoo === 'object') {
        runTwikoo()
      } else {
        getScript('https://cdn.jsdelivr.net/npm/twikoo/dist/twikoo.all.min.js').then(runTwikoo)
      }
  }

  window.pjax ? getCount() : window.addEventListener('load', getCount)

})()</script><script>window.typedJSFn = {
  init: (str) => {
    window.typed = new Typed('#subtitle', Object.assign({
      strings: str,
      startDelay: 300,
      typeSpeed: 150,
      loop: true,
      backSpeed: 50,
    }, null))
  },
  run: (subtitleType) => {
    if (true) {
      if (typeof Typed === 'function') {
        subtitleType()
      } else {
        getScript('https://cdn.jsdelivr.net/npm/typed.js/dist/typed.umd.min.js').then(subtitleType)
      }
    } else {
      subtitleType()
    }
  }
}
</script><script>function subtitleType () {
  getScript('https://sdk.jinrishici.com/v2/browser/jinrishici.js').then(() => {
    jinrishici.load(result =>{
      if (true) {
        const sub = ["If you want it, then you have to take it."]
        const content = result.data.content
        sub.unshift(content)
        typedJSFn.init(sub)
      } else {
        document.getElementById('subtitle').textContent = result.data.content
      }
    })
  })
}
typedJSFn.run(subtitleType)
</script></div><script>window.addEventListener('load', () => {
  const changeContent = (content) => {
    if (content === '') return content

    content = content.replace(/<img.*?src="(.*?)"?[^\>]+>/ig, '[image]') // replace image link
    content = content.replace(/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi, '[link]') // replace url
    content = content.replace(/<pre><code>.*?<\/pre>/gi, '[code]') // replace code
    content = content.replace(/<[^>]+>/g,"") // remove html tag

    if (content.length > 150) {
      content = content.substring(0,150) + '...'
    }
    return content
  }

  const getComment = () => {
    const runTwikoo = () => {
      twikoo.getRecentComments({
        envId: 'https://qliphoth.netlify.app/.netlify/functions/twikoo',
        region: '',
        pageSize: 6,
        includeReply: true
      }).then(function (res) {
        const twikooArray = res.map(e => {
          return {
            'content': changeContent(e.comment),
            'avatar': e.avatar,
            'nick': e.nick,
            'url': e.url + '#' + e.id,
            'date': new Date(e.created).toISOString()
          }
        })

        saveToLocal.set('twikoo-newest-comments', JSON.stringify(twikooArray), 10/(60*24))
        generateHtml(twikooArray)
      }).catch(function (err) {
        const $dom = document.querySelector('#card-newest-comments .aside-list')
        $dom.textContent= "Unable to get the data, please make sure the settings are correct."
      })
    }

    if (typeof twikoo === 'object') {
      runTwikoo()
    } else {
      getScript('https://cdn.jsdelivr.net/npm/twikoo/dist/twikoo.all.min.js').then(runTwikoo)
    }
  }

  const generateHtml = array => {
    let result = ''

    if (array.length) {
      for (let i = 0; i < array.length; i++) {
        result += '<div class=\'aside-list-item\'>'

        if (true) {
          const name = 'src'
          result += `<a href='${array[i].url}' class='thumbnail'><img ${name}='${array[i].avatar}' alt='${array[i].nick}'></a>`
        }
        
        result += `<div class='content'>
        <a class='comment' href='${array[i].url}' title='${array[i].content}'>${array[i].content}</a>
        <div class='name'><span>${array[i].nick} / </span><time datetime="${array[i].date}">${btf.diffDate(array[i].date, true)}</time></div>
        </div></div>`
      }
    } else {
      result += 'No Comment'
    }

    let $dom = document.querySelector('#card-newest-comments .aside-list')
    $dom.innerHTML= result
    window.lazyLoadInstance && window.lazyLoadInstance.update()
    window.pjax && window.pjax.refresh($dom)
  }

  const newestCommentInit = () => {
    if (document.querySelector('#card-newest-comments .aside-list')) {
      const data = saveToLocal.get('twikoo-newest-comments')
      if (data) {
        generateHtml(JSON.parse(data))
      } else {
        getComment()
      }
    }
  }

  newestCommentInit()
  document.addEventListener('pjax:complete', newestCommentInit)
})</script><div class="aplayer no-destroy" data-id="8654234284" data-server="netease" data-type="playlist" data-fixed="true" data-autoplay="false"> </div><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = false;
POWERMODE.mobile = false;
document.body.addEventListener('input', POWERMODE);
</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/metingjs/dist/Meting.min.js"></script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {

  // removeEventListener scroll 
  window.tocScrollFn && window.removeEventListener('scroll', window.tocScrollFn)
  window.scrollCollect && window.removeEventListener('scroll', scrollCollect)

  document.getElementById('rightside').style.cssText = "opacity: ''; transform: ''"
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

  typeof disqusjs === 'object' && disqusjs.destroy()
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', (e) => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><!-- hexo injector body_end start -->
  <script data-pjax src="https://cdn.jsdelivr.net/gh/Zfour/hexo-github-calendar@1.21/hexo_githubcalendar.js"></script>
  <script data-pjax>
        function GithubCalendarConfig(){
            var git_githubapiurl ="https://hexo-api-khaki.vercel.app/api/?user=qlipphoth";
            var git_color =['#ebedf0', '#fdcdec', '#fc9bd9', '#fa6ac5', '#f838b2', '#f5089f', '#c4067e', '#92055e', '#540336', '#48022f', '#30021f'];
            var git_user ="qlipphoth";
            var parent_div_git = document.getElementById('recent-posts');
            var git_div_html = '<div class="recent-post-item" style="width:100%;height:auto;padding:10px;"><div id="github_loading" style="width:10%;height:100%;margin:0 auto;display: block"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"  viewBox="0 0 50 50" style="enable-background:new 0 0 50 50" xml:space="preserve"><path fill="#d0d0d0" d="M25.251,6.461c-10.318,0-18.683,8.365-18.683,18.683h4.068c0-8.071,6.543-14.615,14.615-14.615V6.461z" transform="rotate(275.098 25 25)"><animateTransform attributeType="xml" attributeName="transform" type="rotate" from="0 25 25" to="360 25 25" dur="0.6s" repeatCount="indefinite"></animateTransform></path></svg></div><div id="github_container"></div></div>';
            if(parent_div_git && location.pathname =='/'){
                console.log("已挂载hexo-github-calendar https://github.com/Barry-Flynn/hexo-github-calendar");
                // parent_div_git.innerHTML=git_div_html+parent_div_git.innerHTML // 无报错，但不影响使用(支持pjax跳转)
                parent_div_git.insertAdjacentHTML("afterbegin",git_div_html) // 有报错，但不影响使用(支持pjax跳转)
            };
            GithubCalendar(git_githubapiurl,git_color,git_user)
        }
        if(document.getElementById('recent-posts')){
            GithubCalendarConfig()
        }
    </script>
    <style>#github_container{min-height:280px}@media screen and (max-width:650px) {#github_container{background-image:;min-height:0px}}</style>
    <style></style><script data-pjax>function electric_clock_injector_config(){
                var parent_div_git = document.getElementsByClassName('sticky_layout')[0];
                var item_html = '<div class="card-widget card-clock"><div class="card-glass"><div class="card-background"><div class="card-content"><div id="hexo_electric_clock"><img id="card-clock-loading" src="https://cdn.jsdelivr.net/gh/Zfour/Butterfly-clock/clock/images/weather/loading.gif" style="height: 120px; width: 100%;" data-ll-status="loading" class="entered loading"></div></div></div></div></div>';
                console.log('已挂载electric_clock')
                // parent_div_git.innerHTML=item_html+parent_div_git.innerHTML // 无报错，但不影响使用(支持pjax跳转)
                parent_div_git.insertAdjacentHTML("afterbegin",item_html) // 有报错，但不影响使用(支持pjax跳转)
            }if( document.getElementsByClassName('sticky_layout')[0] && (location.pathname ==='/'|| '/' ==='all')){

            electric_clock_injector_config()
        } </script><script src="https://pv.sohu.com/cityjson?ie=utf-8"></script><script data-pjax  src="https://cdn.jsdelivr.net/gh/Zfour/hexo-electric-clock@1.0.6/clock.js"></script><script data-pjax>
  function butterfly_footer_beautify_injector_config(){
    var parent_div_git = document.getElementById('footer-wrap');
    var item_html = '<div id="workboard"></div><div id="ghbdages" style="overflow:hidden;max-height:90px;height:auto;text-align:center;margin-top:10px"><div class="swiper-wrapper"><div class="swiper-slide"><a class="github-badge" target="_blank" href="https://hexo.io/" style="margin-inline:5px" title="博客框架为Hexo_v5.4.0"><img src="https://img.shields.io/badge/Frame-Hexo-blue?style=flat&amp;logo=hexo" alt=""/></a><a class="github-badge" target="_blank" href="https://butterfly.js.org/" style="margin-inline:5px" title="主题版本Butterfly_v3.8.2"><img src="https://img.shields.io/badge/Theme-Butterfly-6513df?style=flat&amp;logo=bitdefender" alt=""/></a><a class="github-badge" target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" style="margin-inline:5px" title="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可"><img src="https://img.shields.io/badge/Copyright-BY--NC--SA%204.0-d42328?style=flat&amp;logo=Claris" alt=""/></a></div></div></div><style>a.github-badge:hover:before {display:none}</style>';
    console.log('已挂载butterfly_footer_beautify')
    parent_div_git.insertAdjacentHTML("beforeend",item_html)
    }
  var elist = 'null'.split(',');
  var cpage = location.pathname;
  var epage = 'all';
  var flag = 0;

  for (var i=0;i<elist.length;i++){
    if (cpage.includes(elist[i])){
      flag++;
    }
  }

  if ((epage ==='all')&&(flag == 0)){
    butterfly_footer_beautify_injector_config();
  }
  else if (epage === cpage){
    butterfly_footer_beautify_injector_config();
  }
  </script><script async src="/js/runtime.js"></script><script defer src="https://unpkg.zhimg.com/hexo-butterfly-swiper/lib/swiper.min.js"></script><script defer data-pjax src="https://unpkg.zhimg.com/hexo-butterfly-footer-beautify/lib/swiperbdage_init.min.js"></script><!-- hexo injector body_end end --></body></html>